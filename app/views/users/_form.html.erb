<%= form_with(model: setup_user(@user), local: true) do |f| %>
      <%= render 'shared/error_messages', object: f.object %>

      <%= f.label :name %>
      <%= f.text_field :name, class: 'form-control' %>

      <%= f.label :email %>
      <%= f.email_field :email, class: 'form-control' %>

      <%= f.fields_for :address do |ff| %>
        <div>
          <%= ff.label :city %>
          <%= ff.text_field :city %>
        </div>
      <% end %>

      <%= f.label :password %>
      <%= f.password_field :password, class: 'form-control' %>

      <%= f.label :password_confirmation, "Confirmation" %>
      <%= f.password_field :password_confirmation, class: 'form-control' %>

<h2>Tasks to have a go at:</h2>

        <%= f.fields_for :tasks do |ff| %>
          <div >
            <%= ff.label :name %>
            <%= ff.text_field :name %>

            <% if ff.object.persisted? %>
              <%= ff.check_box :_destroy %>
              <%= ff.label :_destroy, "Destroy" %>
            <% end %>
          </div>
        <% end %>
      <%= f.submit yield(:button_text), class: "btn btn-primary" %>
<% end %>
